# Output directory settings - keep build outputs outside project directory
build --symlink_prefix=/tmp/bazel-

# C++ standard
build --cxxopt=-std=c++17

# Compiler warnings
build --cxxopt=-Wall
build --cxxopt=-Wextra
build --cxxopt=-Wpedantic

# Optimization (override with --compilation_mode=dbg for debug builds)
build --cxxopt=-O2

# Debug configuration
build:debug --compilation_mode=dbg
build:debug --cxxopt=-g
build:debug --cxxopt=-DDEBUG

# Address Sanitizer configuration
build:asan --strip=never
build:asan --cxxopt=-fsanitize=address
build:asan --cxxopt=-fno-omit-frame-pointer
build:asan --cxxopt=-g
build:asan --cxxopt=-O1
build:asan --linkopt=-fsanitize=address

# Always enable Address Sanitizer for tests
test --config=asan

# Coverage configuration (ASAN incompatible with coverage)
coverage --config=coverage
build:coverage --compilation_mode=dbg
build:coverage --cxxopt=-g
build:coverage --cxxopt=-O0
build:coverage --cxxopt=--coverage
build:coverage --linkopt=--coverage
coverage --combined_report=lcov
coverage --instrumentation_filter="//src[/:]"
